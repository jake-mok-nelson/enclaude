# Enclaude with Go development environment
# Use: enclaude build -f docker/examples/Dockerfile.golang -t enclaude-golang:latest

FROM ubuntu:24.04

ENV DEBIAN_FRONTEND=noninteractive

# Install base dependencies
RUN apt-get update && apt-get install -y --no-install-recommends \
    ca-certificates \
    curl \
    git \
    openssh-client \
    && rm -rf /var/lib/apt/lists/*

# Install Go
ARG GO_VERSION=1.23.4
RUN curl -fsSL https://go.dev/dl/go${GO_VERSION}.linux-$(dpkg --print-architecture).tar.gz | tar -C /usr/local -xz

# Set up workspace
RUN mkdir -p /workspace /root/go

# Install Claude via official script and copy to shared location
RUN curl -fsSL https://claude.ai/install.sh | bash \
    && cp -L /root/.local/bin/claude /usr/local/bin/claude \
    && chmod 755 /usr/local/bin/claude

ENV HOME=/root
ENV GOPATH=/root/go
ENV PATH="/usr/local/go/bin:/root/go/bin:/usr/local/bin:/usr/bin:/bin"

WORKDIR /workspace

ENTRYPOINT ["/usr/local/bin/claude"]
